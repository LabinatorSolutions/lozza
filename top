
'food\log.txt'
'food\food.js'

//{{{  saved


//}}}
//{{{  try ideas

drofa changes look interesting

xor nets?!

q - check for at least 1 legal move or score > alpha before pruning

q - dont return mate scores

q - use tt

dont round tuned values

index bishop pair by number of pawns

frc option but no castling for now.

delete row 8 pst pawn.

try different ideas for row 8 pawn but should not make any difference - promotions are ranked separately?

bench command - what do ob engines do?

eval - knight in front of passed pawn good

hash option

try hash move before move gen

should not have to sort to get hash move (etc)

eval - k p net training against existing king/pawn eval.

see!!!

move ordering.

eval - discovered attacks.

eval - multiple attacks on same rank/file. e.g. rooks on e1 and e2. and other xray attacks in general.

eval - if each side has one bishop of the same colour bonus oppo colour.

eval - if opps has 0 b and you have 1 b bonus oppos colour.

eval - mobility - use safe squares as well as (or instead of) all squares.

eval - mobility - non linear.

eval - pinned against king (-ve) (cannot move without being in check).

try using running eval in search, if fail, remove (and phase) and move to eval. move anyway - so not doing for illegal moves.

remove king from isattacked now that makemove doesnt move kings next to eachother. test with perft. need to clone isattacked and specialise one for king.

quick see - check for pawn/knight defenders. use in move ordering and futility? bad capture mask - spare bit?

eval - mobility check for pawn defenders on open squares and captures.

is pawn move mask used?

add make/unmake qmove w/o hashing etc for q. in try code fold. needs testing. ?? hash needed for pawn hash.

eval - rework mobility to separate "tightness/tension" (cwtch/smother) from mobility.

eval - change max attackers to 4. re wc chess commentary - tune curve first though.

eval - try different king zone shapes

don't give up on net stuff. move into lozza? get lozza to generate fens from self game play. see sf gensfen command for ideas.

check killers is working still - check if needed - check captures as killers is needed etc

//}}}
//{{{  try code

//{{{  .setTTSize

lozBoard.prototype.setTTSize = function (mb) {

  var q     = Math.log2(mb) | 0;
  var shift = 16 + q;

  if (shift < 16)
    shift = 16;

  if (shift > 26)
    shift = 26;

  if (shift != TTSHIFT) {

    TTSHIFT = shift;
    TTSIZE  = 1 << TTSHIFT;
    TTMASK  = TTSIZE - 1;

    this.ttLo      = new Int32Array(TTSIZE);
    this.ttHi      = new Int32Array(TTSIZE);
    this.ttType    = new Uint8Array(TTSIZE);
    this.ttDepth   = new Int8Array(TTSIZE);   // allow -ve depths but currently not used for q.
    this.ttMove    = new Uint32Array(TTSIZE); // see constants for structure.
    this.ttScore   = new Int16Array(TTSIZE);
  }
}

//}}}
//{{{  safe
//{{{  .isSafeForW

lozBoard.prototype.isSafeForW = function(to) {

  var b  = this.b;

  if (b[to - 11] == B_PAWN) return 0;
  if (b[to - 13] == B_PAWN) return 0;

  return 1;
}


//}}}
//{{{  .isSafeForB

lozBoard.prototype.isSafeForB = function(to) {

  var b  = this.b;

  if (b[to + 11] == W_PAWN) return 0;
  if (b[to + 13] == W_PAWN) return 0;

  return 1;
}


//}}}
//}}}
//{{{  .getHistory

lozBoard.prototype.getHistory = function (move) {

  var to      = (move & MOVE_TO_MASK)    >>> MOVE_TO_BITS;
  var frObj   = (move & MOVE_FROBJ_MASK) >>> MOVE_FROBJ_BITS;
  var frPiece = frObj & PIECE_MASK;

  if ((frObj & COLOR_MASK) == WHITE) {
    return this.wHistory[frPiece][to];
  }
  else {
    return this.bHistory[frPiece][to];
  }
}

//}}}
//{{{  readline
if (lozzaHost == HOST_NODEJS) {

  const readline = require('readline');
  const rl       = readline.createInterface({
    input:  process.stdin,
    output: process.stdout
  });

  rl.on('line', (line) => {
    onmessage({data: line.trim()});
  })

}

//}}}

//}}}
//{{{  cutechess help

'C:\Program Files (x86)\Cute Chess\cutechess-cli.6.txt'
'C:\Program Files (x86)\Cute Chess\engines.json.5.txt'

//}}}
//{{{  lichess-bot

'lichess-bot\engines\clean.js'
'lichess-bot\config.yml'

//}}}

'lozza\trunk\lozza.js'

//{{{  other lozzas

'lozza\trunk\clean.js'

'lozza\trunk\history\2.1\lozza.js'

'lozza\trunk\history\2.0\lozza.js'
'lozza\trunk\history\2.0\release\lozza.js'
'lozza\trunk\history\2.0\release\readme.txt'
'lozza\trunk\history\2.0\release\lozza.bat'

'lozza\trunk\history\1.18\lozza.js'

'lozza\trunk\deadends\lozza21alpha.js' - working net
'lozza\trunk\deadends\lozza3.js'       - xray

//}}}

'lozza\trunk\testing\gdtuner.js'
'lozza\trunk\testing\gdtuner.txt'
'lozza\trunk\testing\0gdtuner.txt'

'lozza\trunk\testing\nettuner.js'
'lozza\trunk\testing\nettuner4.txt'
'lozza\trunk\testing\nettuner8.txt'
'lozza\trunk\testing\nettuner12.txt'
'lozza\trunk\testing\nettuner16.txt'
'lozza\trunk\testing\nettuner32.txt'

'lozza\trunk\testing\eval.js'
'lozza\trunk\testing\eval_flip.js'

'lozza\trunk\testing\quiet.js'
'lozza\trunk\testing\makeepd.bat'

'lozza\trunk\testing\cctry.bat'
'lozza\trunk\testing\engines.json'
'lozza\trunk\testing\cctry.pgn'

'lozza\trunk\testing\linux\getlozza'
'lozza\trunk\testing\linux\cctry'
'lozza\trunk\testing\linux\engines.json'

'lozza\trunk\testing\tuner.js'
'lozza\trunk\testing\tuner.txt'

//{{{  toynet

'toynet\trunk\toynet.js'

//}}}
//{{{  lozzaui

'lozza-ui\trunk\index.htm'

'lozza-ui\trunk\perft.htm'
'lozza-ui\trunk\perft.js'

'lozza-ui\trunk\ex.htm'
'lozza-ui\trunk\ex.js'

'lozza-ui\trunk\profile.htm'
'lozza-ui\trunk\profile.js'

'lozza-ui\trunk\playhelp.htm'
'lozza-ui\trunk\play.htm'
'lozza-ui\trunk\play.js'

'lozza-ui\trunk\fenhelp.htm'
'lozza-ui\trunk\fen.htm'
'lozza-ui\trunk\fen.js'

'lozza-ui\trunk\consolehelp.htm'
'lozza-ui\trunk\console.htm'
'lozza-ui\trunk\console.js'

'lozza-ui\trunk\mate.htm'
'lozza-ui\trunk\mate.js'

'lozza-ui\trunk\tune.htm'
'lozza-ui\trunk\tune.js'

//}}}
//{{{  roller

'roller\trunk\roller.js'

'C:\projects\myc\public_html\index.php'

//}}}
//{{{  winboard
'c:\winboard\winboard\wb.bat'

//}}}

'myc\public_html\index.php'
'myc\public_html\styles.css'

